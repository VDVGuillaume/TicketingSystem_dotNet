@model TicketingSystem.RazorWebsite.Models.Tickets.TicketUpdateViewModel
@{
    ViewData["Title"] = "Ticket aanpassen";
}

<form asp-action="Update" asp-controller="Ticket" asp-route-id="@Model.Ticket.Id" asp-route-returnUrl="@(Url.Action("Details", "Ticket", new { id = @Model.Ticket.Id }))">
    @Html.HiddenFor(x => x.Ticket.Id)
    @Html.HiddenFor(x => x.Ticket.Title)
    @Html.HiddenFor(x => x.Ticket.Type)
    @Html.HiddenFor(x => x.Ticket.Status)
    @Html.HiddenFor(x => x.Ticket.Client)
    @Html.HiddenFor(x => x.Ticket.DateAdded)
    @Html.HiddenFor(x => x.Ticket.Description)

    @for (int i = 0; i < Model.TicketTypes.Count; i++)
    {
        @Html.HiddenFor(model => Model.TicketTypes[i])
    }

    @if (User.IsInRole("SupportManager"))
    {
        <h1><input asp-for="Input.Title" class="form-control" value="@Model.Ticket.Title" /></h1>

        @if (ViewData.ModelState["ValidationError"]?.Errors.Count() > 0)
        {
            <div class="alert alert-danger" role="alert">
                @Html.ValidationMessage("ValidationError")
            </div>
        }

        <div class="row">
            <div class="col-lg-3 font-weight-bold"><p>TicketNummer</p></div>
            <div class="col-lg-9"><p>@Model.Ticket.Id</p></div>
        </div>
        <div class="row">
            <div class="col-lg-3 font-weight-bold"><p><label asp-for="Input.Type">Type</label></p></div>
            <div class="col-lg-9">
                <p>
                    <!--//TODO set correct type as selected-->
                    <select asp-for="Input.Type" asp-items="Model.TicketTypes" class="form-control">@Model.Ticket.Type</select>
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-3 font-weight-bold"><p>Status</p></div>
            <div class="col-lg-9"><p>@Model.Ticket.Status</p></div>
        </div>
        <div class="row">
            <div class="col-lg-3 font-weight-bold"><p>Klant</p></div>
            <div class="col-lg-9"><p>@Model.Ticket.Client</p></div>
        </div>
        <div class="row">
            <div class="col-lg-3 font-weight-bold"><p>Creatiedatum</p></div>
            <div class="col-lg-9"><p>@Model.Ticket.DateAdded</p></div>
        </div>
        <div class="row">
            <div class="col-lg-3 font-weight-bold"><p><label asp-for="Input.Description">Omschrijving</label></p></div>
            <div class="col-lg-9"><p><input asp-for="Input.Description" class="form-control" value="@Model.Ticket.Description" /></p></div>
        </div>
        <!--<div class="row">-->
        @*<div class="col-12">
                <p>
                    <a asp-area="" asp-controller="/Ticket" asp-action="Update" asp-route-id="@Model.Ticket.Id">Ticket aanpassen</a>
                </p>
            </div>*@
        <!--<div class="col-6 text-right">
            </div>
        </div>-->
    }
    else
    {
        <h1>@Model.Ticket.Title</h1>

        @if (ViewData.ModelState["ValidationError"]?.Errors.Count() > 0)
        {
            <div class="alert alert-danger" role="alert">
                @Html.ValidationMessage("ValidationError")
            </div>
        }

        <div class="row">
            <div class="col-lg-3 font-weight-bold"><p>TicketNummer</p></div>
            <div class="col-lg-9"><p>@Model.Ticket.Id</p></div>
        </div>
        <div class="row">
            <div class="col-lg-3 font-weight-bold"><p>Type</p></div>
            <div class="col-lg-9"><p>@Model.Ticket.Type</p></div>
        </div>
        <div class="row">
            <div class="col-lg-3 font-weight-bold"><p>Status</p></div>
            <div class="col-lg-9"><p>@Model.Ticket.Status</p></div>
        </div>
        <div class="row">
            <div class="col-lg-3 font-weight-bold"><p>Creatiedatum</p></div>
            <div class="col-lg-9"><p>@Model.Ticket.DateAdded</p></div>
        </div>
        <div class="row">
            <div class="col-lg-3 font-weight-bold"><p><label asp-for="Input.Description">Omschrijving</label></p></div>
            <div class="col-lg-9">
                <p><input asp-for="Input.Description" class="form-control" value="@Model.Ticket.Description" /></p>
                <p><span asp-validation-for="Input.Description" class="text-danger"></span></p>
            </div>
        </div>
        @*<div class="row">
                <div class="col-12">
                    <p>
                        <input type="submit" value="Aanpassen" class="btn btn-primary" />
                        <button asp-area="" asp-controller="/Ticket" asp-action="Details" asp-route-id="@Model.Ticket.Id" class="btn btn-danger">Annuleren</button>
                    </p>
                </div>
                <div class="col-6 text-right">
                </div>
            </div>*@
    }
    <div class="form-group">
        <input type="submit" value="Aanpassen" class="btn btn-primary" />
    </div>
</form>
        @section Scripts {
            @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
        }
